<%- include("../partials/_header.ejs") %>
<!-- Gallery Section -->
<section id="gallery" class="gallery-section py-5">
  <div class="container">
    <!-- Title and Description -->
    <div class="row text-center mb-5">
      <div class="col-lg-12" data-aos="fade-up">
        <h2 class="section-title">Gallery</h2>
        <p class="section-description">Explore the beauty of our guest house through our gallery.</p>
      </div>
    </div>

    <!-- Category Navigation -->
    <div class="category-nav">
      <button class="category-btn active" data-category="all">All</button>
      <button class="category-btn" data-category="rooms">Rooms</button>
      <button class="category-btn" data-category="facilities">Facilities</button>
      <button class="category-btn" data-category="events">Events</button>
    </div>

    <!-- Gallery -->
    <div class="gallery-container" id="gallery">
      <div class="image-item" data-category="rooms" data-aos="fade-up" data-aos-duration="1000">
        <img src="assets/hero/hero-2.webp" alt="Room 1" class="gallery-image" loading="lazy">
      </div>
      <div class="image-item" data-category="facilities" data-aos="fade-up" data-aos-duration="1000">
        <img src="assets/hero/hero-1.webp" alt="Facility 1" class="gallery-image" loading="lazy">
      </div>
      <div class="image-item" data-category="events" data-aos="fade-up" data-aos-duration="1000">
        <img src="assets/hero/hero-3.webp" alt="Event 1" class="gallery-image" loading="lazy">
      </div>
      <!-- More images here -->
    </div>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
      <div class="lightbox-content">
        <span class="close" id="closeLightbox">&times;</span>
        <button class="nav-btn prev" id="prevBtn">← Prev</button>
        <img id="lightbox-image" src="" alt="">
        <button class="nav-btn next" id="nextBtn">Next →</button>
        <div id="lightbox-description"></div>
      </div>
    </div>
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    AOS.init(); 

    const categoryButtons = document.querySelectorAll('.category-btn');
    const images = document.querySelectorAll('.image-item');
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxDescription = document.getElementById('lightbox-description');
    const closeLightbox = document.getElementById('closeLightbox');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    let currentIndex = -1; // Index for modal navigation

    // Filter images based on selected category
    categoryButtons.forEach(button => {
      button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');
        images.forEach(image => {
          if (category === 'all' || image.getAttribute('data-category') === category) {
            image.style.display = 'block';
            image.classList.add('fadeIn');
          } else {
            image.style.display = 'none';
          }
        });

        // Highlight the active category button
        categoryButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
      });
    });

    // Show lightbox modal with image and description
    images.forEach((image, index) => {
      image.addEventListener('click', () => {
        const description = image.alt || "No description available";
        lightboxImage.src = image.querySelector('img').src;
        lightboxDescription.innerText = description;
        currentIndex = index; // Set current index for modal navigation
        lightbox.style.display = 'flex';
      });
    });

    // Close the lightbox modal
    closeLightbox.addEventListener('click', () => {
      lightbox.style.display = 'none';
    });

    // Modal navigation (Prev/Next)
    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex === 0) ? images.length - 1 : currentIndex - 1;
      const newImage = images[currentIndex].querySelector('img');
      lightboxImage.src = newImage.src;
      lightboxDescription.innerText = newImage.alt;
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex === images.length - 1) ? 0 : currentIndex + 1;
      const newImage = images[currentIndex].querySelector('img');
      lightboxImage.src = newImage.src;
      lightboxDescription.innerText = newImage.alt;
    });

    // Initialize default view (all images)
    categoryButtons[0].click();
  });
</script>
